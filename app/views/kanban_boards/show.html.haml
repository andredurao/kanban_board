.row
  %p#notice= notice
.row
  %h1= @kanban_board.title
  %p
    %i= @kanban_board.description
  - @kanban_board.default_columns.each do |col|
    .col-md-3
      .panel.panel-default
        .panel-heading
          .panel-title
            = t "activerecord.attributes.kanban_board.#{col}"
            %button.btn.btn-link.btn-sm.pull-right{"data-target-modal" => "#new-task-modal", "data-status" => col, :type => "button", "data-toggle" => "tooltip", "data-placement" => "top", "title" => "New task"}
              =icon("plus-square")
        .panel-body.task-droppable{"data-status" => col}
          - @kanban_board.tasks.of_status(col).each do |task|
            .panel{:class => "panel-#{task_class_by_priority(task.priority)} task-draggable", "data-id" => task.id, "data-kind" => "Task"}
              .panel-heading
                .panel-title= task.title
          /render tasks with that status
.row
  = link_to 'Edit', edit_kanban_board_path(@kanban_board)
  |
  = link_to 'Back', kanban_boards_path
  |
  = link_to 'Tasks', kanban_board_tasks_path(@kanban_board)
= render "tasks/modal"
= render text: File.read("#{Rails.root}/app/views/shared/_task_underscore_template.html").html_safe
= render text: File.read("#{Rails.root}/app/views/shared/_task_errors_template.html").html_safe
